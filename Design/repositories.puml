@startuml repositories

package "repositories" {
    interface IRepository<T> {
        + Task<bool> CreateAsync(T item)
        + Task<bool> UpdateAsync(T item)
        + Task<bool> DeleteAsync(T item)
        + Task<T> GetByIdAsync(Guid Id)
        + Task<List<T>> GetAllAsync()
    }

    interface IUserRepository extends IRepository {
        + Task<bool> ResetPassword(string email)
        + Task<User> GetProfileByIdAsync(Guid id)
        + Task<bool> UpdateProfileAsync(User user)
    }

    class UserRepository implements IUserRepository {
        + Task<bool> CreateAsync(T item)
        + Task<bool> UpdateAsync(T item)
        + Task<bool> DeleteAsync(T item)
        + Task<T> GetByIdAsync(Guid Id)
        + Task<List<T>> GetAllAsync()
        + Task<bool> PasswordReset(string email)
        + Task<User> GetProfileByIdAsync(Guid id)
        + Task<bool> UpdateProfileAsync(User user)
    }

    interface IExpenseRepository extends IRepository {
        + task<string> GetHighestSpendingCategoryByUserId(Guid userId, string category)
        + task<string> GetMostExpensiveMonthByUserId(Guid userId, DateTime month)
    }

    class ExpenseRepository implements IExpenseRepository {
        + Task<bool> CreateAsync(T item)
        + Task<bool> UpdateAsync(T item)
        + Task<bool> DeleteAsync(T item)
        + Task<T> GetByIdAsync(Guid Id)
        + Task<List<T>> GetAllAsync()
        + Task<string> GetHighestSpendingCategoryByUserId(Guid userId, string category)
        + Task<string> GetMostExpensiveMonthByUserId(Guid userId, DateTime month)
    }

    interface IIncomeRepository extends IRepository {
        + Task<string> GetMonthlyIncomeByUserId(Guid userId, DateTime month)
    }

    class IncomeRepository implements IIncomeRepository {
        + Task<bool> CreateAsync(T item)
        + Task<bool> UpdateAsync(T item)
        + Task<bool> DeleteAsync(T item)
        + Task<T> GetByIdAsync(Guid Id)
        + Task<List<T>> GetAllAsync()
        + Task<string> GetMonthlyIncomeByUserId(Guid userId, DateTime month)
    }

    interface IBudgetRepository extends IRepository {
        + Task<string> GetMonthlyBudgetByUserId(Guid userId, DateTime month)
    }

    class BudgetRepository implements IBudgetRepository {
        + Task<bool> CreateAsync(T item)
        + Task<bool> UpdateAsync(T item)
        + Task<bool> DeleteAsync(T item)
        + Task<T> GetByIdAsync(Guid Id)
        + Task<List<T>> GetAllAsync()
        + Task<string> GetMonthlyBudgetByUserId(Guid userId, DateTime month)
    }

    interface IGoalRepository extends IRepository {
        + Task<List<Goal>> GetActiveGoalsByUserId(Guid userId)
        + Task<decimal> GetGoalProgress(Guid goalId)
        + Task<bool> UpdateGoalProgress(Guid goalId, decimal amount)
    }

    class GoalRepository implements IGoalRepository {
        + Task<bool> CreateAsync(T item)
        + Task<bool> UpdateAsync(T item)
        + Task<bool> DeleteAsync(T item)
        + Task<T> GetByIdAsync(Guid Id)
        + Task<List<T>> GetAllAsync()
        + Task<List<Goal>> GetActiveGoalsByUserId(Guid userId)
        + Task<decimal> GetGoalProgress(Guid goalId)
        + Task<bool> UpdateGoalProgress(Guid goalId, decimal amount)
    }
}

@enduml